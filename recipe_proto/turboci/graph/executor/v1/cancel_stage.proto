// Copyright 2025 The Chromium Authors
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.

syntax = "proto3";

package turboci.graph.executor.v1;

import "turboci/graph/ids/v1/identifier.proto";
import "turboci/graph/orchestrator/v1/stage.proto";
import "turboci/graph/orchestrator/v1/value_data.proto";

option go_package = "go.chromium.org/turboci/proto/go/graph/executor/v1;executorpb";
option java_multiple_files = true;

// Request to cancel an asynchronous stage attempt.
message CancelStageRequest {
  // Stage with the attempt being canceled.
  optional orchestrator.v1.Stage stage = 1;

  // A map containing [ValueData] for `stage`.
  //
  // This is key'd by [ValueRef].digest.
  map<string, orchestrator.v1.ValueData> value_data = 4;

  // ID of the stage attempt to cancel.
  optional ids.v1.StageAttempt attempt = 2;

  // A token generated by the orchestrator for the executor to perform updates
  // to the workflow resources (checks and/or stages).
  optional string stage_attempt_token = 3;
}

// Response to cancel a stage attempt.
message CancelStageResponse {}
