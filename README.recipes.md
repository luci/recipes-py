<!--- AUTOGENERATED BY `./recipes.py test train` -->
# Package documentation for [recipe\_engine](https://chromium.googlesource.com/infra/luci/recipes-py.git)
## Table of Contents

**[Recipe Modules](#Recipe-Modules)**
  * [buildbucket](#recipe_modules-buildbucket) &mdash; API for interacting with the buildbucket service.
  * [context](#recipe_modules-context) &mdash; The context module provides APIs for manipulating a few pieces of 'ambient' data that affect how steps are run.
  * [file](#recipe_modules-file) &mdash; File manipulation (read/write/delete/glob) methods.
  * [generator_script](#recipe_modules-generator_script) &mdash; A simplistic method for running steps generated by an external script.
  * [json](#recipe_modules-json) &mdash; Methods for producing and consuming JSON.
  * [path](#recipe_modules-path) &mdash; All functions related to manipulating paths in recipes.
  * [platform](#recipe_modules-platform) &mdash; Mockable system platform identity functions.
  * [properties](#recipe_modules-properties) &mdash; Provides access to the recipes input properties.
  * [python](#recipe_modules-python) &mdash; Provides methods for running python scripts correctly.
  * [raw_io](#recipe_modules-raw_io) &mdash; Provides objects for reading and writing raw data to and from steps.
  * [runtime](#recipe_modules-runtime)
  * [service_account](#recipe_modules-service_account) &mdash; API for getting OAuth2 access tokens for LUCI tasks or private keys.
  * [source_manifest](#recipe_modules-source_manifest)
  * [step](#recipe_modules-step) &mdash; Step is the primary API for running steps (external programs, scripts, etc.
  * [tempfile](#recipe_modules-tempfile) &mdash; Simplistic temporary directory manager (deprecated).
  * [time](#recipe_modules-time) &mdash; Allows mockable access to the current time.
  * [url](#recipe_modules-url) &mdash; Methods for interacting with HTTP(s) URLs.

**[Recipes](#Recipes)**
  * [buildbucket:examples/full](#recipes-buildbucket_examples_full) &mdash; This file is a recipe demonstrating the buildbucket recipe module.
  * [buildbucket:tests/get](#recipes-buildbucket_tests_get)
  * [buildbucket:tests/properties](#recipes-buildbucket_tests_properties)
  * [buildbucket:tests/put](#recipes-buildbucket_tests_put)
  * [context:examples/full](#recipes-context_examples_full)
  * [context:tests/cwd](#recipes-context_tests_cwd)
  * [context:tests/env](#recipes-context_tests_env)
  * [context:tests/increment_nest_level](#recipes-context_tests_increment_nest_level)
  * [context:tests/infra_step](#recipes-context_tests_infra_step)
  * [engine_tests/bad_subprocess](#recipes-engine_tests_bad_subprocess) &mdash; Tests that daemons that hang on to STDOUT can't cause the engine to hang.
  * [engine_tests/depend_on/bad_properties](#recipes-engine_tests_depend_on_bad_properties)
  * [engine_tests/depend_on/bottom](#recipes-engine_tests_depend_on_bottom)
  * [engine_tests/depend_on/dont_need_properties](#recipes-engine_tests_depend_on_dont_need_properties)
  * [engine_tests/depend_on/dont_need_properties_helper](#recipes-engine_tests_depend_on_dont_need_properties_helper)
  * [engine_tests/depend_on/need_return_schema](#recipes-engine_tests_depend_on_need_return_schema)
  * [engine_tests/depend_on/need_return_schema_helper](#recipes-engine_tests_depend_on_need_return_schema_helper)
  * [engine_tests/depend_on/no_return](#recipes-engine_tests_depend_on_no_return)
  * [engine_tests/depend_on/top](#recipes-engine_tests_depend_on_top)
  * [engine_tests/expect_exception](#recipes-engine_tests_expect_exception) &mdash; Tests that step_data can accept multiple specs at once.
  * [engine_tests/functools_partial](#recipes-engine_tests_functools_partial) &mdash; Engine shouldn't explode when step_test_data gets functools.
  * [engine_tests/missing_start_dir](#recipes-engine_tests_missing_start_dir) &mdash; Tests that deleting the current working directory doesn't immediately fail.
  * [engine_tests/module_injection_site](#recipes-engine_tests_module_injection_site) &mdash; This test serves to demonstrate that the ModuleInjectionSite object on recipe modules (i.
  * [engine_tests/multi_test_data](#recipes-engine_tests_multi_test_data) &mdash; Tests that step_data can accept multiple specs at once.
  * [engine_tests/nonexistent_command](#recipes-engine_tests_nonexistent_command)
  * [engine_tests/recipe_paths](#recipes-engine_tests_recipe_paths) &mdash; Tests that recipes have access to names, resources and their package.
  * [engine_tests/sort_properties](#recipes-engine_tests_sort_properties) &mdash; Tests that step presentation properties can be ordered.
  * [engine_tests/step_stack_exhaustion](#recipes-engine_tests_step_stack_exhaustion) &mdash; Tests that placeholders can't wreck the world by exhausting the step stack.
  * [engine_tests/undeclared_method](#recipes-engine_tests_undeclared_method)
  * [engine_tests/unicode](#recipes-engine_tests_unicode)
  * [engine_tests/whitelist_steps](#recipes-engine_tests_whitelist_steps) &mdash; Tests that step_data can accept multiple specs at once.
  * [file:examples/copy](#recipes-file_examples_copy)
  * [file:examples/copytree](#recipes-file_examples_copytree)
  * [file:examples/error](#recipes-file_examples_error)
  * [file:examples/glob](#recipes-file_examples_glob)
  * [file:examples/listdir](#recipes-file_examples_listdir)
  * [file:examples/raw_copy](#recipes-file_examples_raw_copy)
  * [file:examples/symlink](#recipes-file_examples_symlink)
  * [file:examples/truncate](#recipes-file_examples_truncate)
  * [generator_script:examples/full](#recipes-generator_script_examples_full)
  * [json:examples/full](#recipes-json_examples_full)
  * [json:tests/add_json_log](#recipes-json_tests_add_json_log)
  * [path:examples/full](#recipes-path_examples_full)
  * [platform:examples/full](#recipes-platform_examples_full)
  * [properties:examples/full](#recipes-properties_examples_full)
  * [python:examples/full](#recipes-python_examples_full) &mdash; Launches the repo bundler.
  * [raw_io:examples/full](#recipes-raw_io_examples_full)
  * [runtime:tests/full](#recipes-runtime_tests_full)
  * [service_account:examples/full](#recipes-service_account_examples_full)
  * [source_manifest:examples/simple](#recipes-source_manifest_examples_simple)
  * [step:examples/full](#recipes-step_examples_full)
  * [step:tests/active_result](#recipes-step_tests_active_result)
  * [step:tests/defer](#recipes-step_tests_defer)
  * [step:tests/inject_paths](#recipes-step_tests_inject_paths)
  * [step:tests/nested](#recipes-step_tests_nested)
  * [step:tests/stdio](#recipes-step_tests_stdio)
  * [step:tests/subannotations](#recipes-step_tests_subannotations)
  * [step:tests/timeout](#recipes-step_tests_timeout)
  * [step:tests/trigger](#recipes-step_tests_trigger)
  * [tempfile:examples/full](#recipes-tempfile_examples_full)
  * [time:examples/full](#recipes-time_examples_full)
  * [url:examples/full](#recipes-url_examples_full)
  * [url:tests/join](#recipes-url_tests_join)
  * [url:tests/validate_url](#recipes-url_tests_validate_url)
## Recipe Modules

### *recipe_modules* / [buildbucket](/recipe_modules/buildbucket)

[DEPS](/recipe_modules/buildbucket/__init__.py#5): [json](#recipe_modules-json), [platform](#recipe_modules-platform), [properties](#recipe_modules-properties), [raw\_io](#recipe_modules-raw_io), [runtime](#recipe_modules-runtime), [step](#recipe_modules-step)

API for interacting with the buildbucket service.

Depends on 'buildbucket' binary available in PATH:
https://godoc.org/go.chromium.org/luci/buildbucket/client/cmd/buildbucket

#### **class [BuildbucketApi](/recipe_modules/buildbucket/api.py#14)([RecipeApi](/recipe_engine/recipe_api.py#997)):**

A module for interacting with buildbucket.

&mdash; **def [cancel\_build](/recipe_modules/buildbucket/api.py#88)(self, build_id, \*\*kwargs):**

&mdash; **def [get\_build](/recipe_modules/buildbucket/api.py#91)(self, build_id, \*\*kwargs):**

&emsp; **@property**<br>&mdash; **def [properties](/recipe_modules/buildbucket/api.py#47)(self):**

Returns (dict-like or None): The BuildBucket properties, if present.

&mdash; **def [put](/recipe_modules/buildbucket/api.py#59)(self, builds, \*\*kwargs):**

Puts a batch of builds.

Args:
  builds (list): A list of dicts, where keys are:
    'bucket': (required) name of the bucket for the request.
    'parameters' (dict): (required) arbitrary json-able parameters that a
      build system would be able to interpret.
    'tags': (optional) a dict(str->str) of tags for the build. These will
      be added to those generated by this method and override them if
      appropriate. If you need to remove a tag set by default, set its value
      to None (for example, tags={'buildset': None} will ensure build is
      triggered without 'buildset' tag).

Returns:
  A step that as its .stdout property contains the response object as
  returned by buildbucket.

&mdash; **def [set\_buildbucket\_host](/recipe_modules/buildbucket/api.py#25)(self, host):**

Changes the buildbucket backend hostname used by this module.

Args:
  host (str): buildbucket server host (e.g. 'cr-buildbucket.appspot.com').

&mdash; **def [use\_service\_account\_key](/recipe_modules/buildbucket/api.py#33)(self, key_path):**

Tells this module to start using given service account key for auth.

Otherwise the module is using the default account (when running on LUCI or
locally), or no auth at all (when running on Buildbot).

Exists mostly to support Buildbot environment. Recipe for LUCI environment
should not use this.

Args:
  key_path (str): a path to JSON file with service account credentials.
### *recipe_modules* / [context](/recipe_modules/context)

[DEPS](/recipe_modules/context/__init__.py#5): [path](#recipe_modules-path)

The context module provides APIs for manipulating a few pieces of 'ambient'
data that affect how steps are run.

The pieces of information which can be modified are:
  * cwd - The current working directory.
  * env - The environment variables.
  * infra_step - Whether or not failures should be treated as infrastructure
    failures vs. normal failures.
  * name_prefix - A prefix for all step names.
  * nest_level - An indicator for the UI of how deeply to nest steps.

The values here are all scoped using Python's `with` statement; there's no
mechanism to make an open-ended adjustment to these values (i.e. there's no way
to change the cwd permanently for a recipe, except by surrounding the entire
recipe with a with statement). This is done to avoid the surprises that
typically arise with things like os.environ or os.chdir in a normal python
program.

Example:
```python
with api.context(cwd=api.path['start_dir'].join('subdir')):
  # this step is run inside of the subdir directory.
  api.step("cat subdir/foo", ['cat', './foo'])
```

#### **class [ContextApi](/recipe_modules/context/api.py#49)([RecipeApi](/recipe_engine/recipe_api.py#997)):**

&emsp; **@contextmanager**<br>&mdash; **def [\_\_call\_\_](/recipe_modules/context/api.py#64)(self, cwd=None, env_prefixes=None, env_suffixes=None, env=None, increment_nest_level=None, infra_steps=None, name_prefix=None):**

Allows adjustment of multiple context values in a single call.

Args:
  * cwd (Path) - the current working directory to use for all steps.
    To 'reset' to the original cwd at the time recipes started, pass
    `api.path['start_dir']`.
  * env_prefixes (dict) - Environmental variable prefix augmentations. See
      below for more info.
  * env_suffixes (dict) - Environmental variable suffix augmentations. See
      below for more info.
  * env (dict) - Environmental variable overrides. See below for more info.
  * increment_nest_level (True) - increment the nest level by 1 in this
    context. Typically you won't directly interact with this, but should
    use api.step.nest instead.
  * infra_steps (bool) - if steps in this context should be considered
    infrastructure steps. On failure, these will raise InfraFailure
    exceptions instead of StepFailure exceptions.
  * name_prefix (str) - A string to prepend to the names of all steps in
    this context. These compose with '.' characters if multiple name prefix
    contexts occur. See below for more info.

Name prefixes:

Multiple invocations concatenate values with '.'.

Example:
```python
with api.context(name_prefix='hello'):
  # has name 'hello.something'
  api.step('something', ['echo', 'something'])

  with api.context(name_prefix='world'):
    # has name 'hello.world.other'
    api.step('other', ['echo', 'other'])
```

Environmental Variable Overrides:

Env is a mapping of environment variable name to the value you want that
environment variable to have. The value is one of:
  * None, indicating that the environment variable should be removed from
    the environment when the step runs.
  * A string value. Note that string values will be %-formatted with the
    current value of the environment at the time the step runs. This means
    that you can have a value like:
        "/path/to/my/stuff:%(PATH)s"
    Which, at the time the step executes, will inject the current value of
    $PATH.

"env_prefix" and "env_suffix" are a list of Path or strings that get
prefixed (or suffixed) to their respective environment variables, delimited
with the system's path separator. This can be used to add entries to
environment variables such as "PATH" and "PYTHONPATH". If prefixes are
specified and a value is also defined in "env", the value will be installed
as the last path component if it is not empty.

**TODO(iannucci): combine nest_level and name_prefix**

Look at the examples in "examples/" for examples of context module usage.

&emsp; **@property**<br>&mdash; **def [cwd](/recipe_modules/context/api.py#204)(self):**

Returns the current working directory that steps will run in.

**Returns (Path|None)** - The current working directory. A value of None is
equivalent to api.path['start_dir'], though only occurs if no cwd has been
set (e.g. in the outermost context of RunSteps).

&emsp; **@property**<br>&mdash; **def [env](/recipe_modules/context/api.py#214)(self):**

Returns modifications to the environment.

By default this is empty; There's no facility to observe the program's
startup environment. If you want to pass data to the recipe, it should be
done with properties.

**Returns (dict)** - The env-key -> value mapping of current environment
  modifications.

&emsp; **@property**<br>&mdash; **def [env\_prefixes](/recipe_modules/context/api.py#229)(self):**

Returns Path prefix modifications to the environment.

This will return a mapping of environment key to Path tuple for Path
prefixes registered with the environment.

**Returns (dict)** - The env-key -> value(Path) mapping of current
environment prefix modifications.

&emsp; **@property**<br>&mdash; **def [env\_suffixes](/recipe_modules/context/api.py#243)(self):**

Returns Path suffix modifications to the environment.

This will return a mapping of environment key to Path tuple for Path
suffixes registered with the environment.

**Returns (dict)** - The env-key -> value(Path) mapping of current
environment suffix modifications.

&emsp; **@property**<br>&mdash; **def [infra\_step](/recipe_modules/context/api.py#257)(self):**

Returns the current value of the infra_step setting.

**Returns (bool)** - True iff steps are currently considered infra steps.

&emsp; **@property**<br>&mdash; **def [name\_prefix](/recipe_modules/context/api.py#265)(self):**

Gets the current step name prefix.

**Returns (str)** - The string prefix that every step will have prepended to
it.

&emsp; **@property**<br>&mdash; **def [nest\_level](/recipe_modules/context/api.py#274)(self):**

Returns the current 'nesting' level.

Note: This api is low-level, and you should always prefer to use
`api.step.nest`. This api is included for completeness and documentation
purposes.

**Returns (int)** - The current nesting level.
### *recipe_modules* / [file](/recipe_modules/file)

[DEPS](/recipe_modules/file/__init__.py#5): [json](#recipe_modules-json), [path](#recipe_modules-path), [python](#recipe_modules-python), [raw\_io](#recipe_modules-raw_io), [step](#recipe_modules-step)

File manipulation (read/write/delete/glob) methods.

#### **class [FileApi](/recipe_modules/file/api.py#17)([RecipeApi](/recipe_engine/recipe_api.py#997)):**

&mdash; **def [copy](/recipe_modules/file/api.py#53)(self, name, source, dest):**

Copies a file (including mode bits) from source to destination on the
local filesystem.

Behaves identically to shutil.copy.

Args:
  * name (str) - The name of the step.
  * source (Path|Placeholder) - The path to the file you want to copy.
  * dest (Path|Placeholder) - The path to the destination file name. If this
    path exists and is a directory, the basename of `source` will be
    appended to derive a path to a destination file.

Raises file.Error

&mdash; **def [copytree](/recipe_modules/file/api.py#73)(self, name, source, dest, symlinks=False):**

Recursively copies a directory tree.

Behaves identically to shutil.copytree.
`dest` must not exist.

Args:
  * name (str) - The name of the step.
  * source (Path) - The path of the directory to copy.
  * dest (Path) - The place where you want the recursive copy to show up. This
    must not already exist.
  * symlinks (bool) - Preserve symlinks. No effect on Windows.

Raises file.Error

&mdash; **def [ensure\_directory](/recipe_modules/file/api.py#243)(self, name, dest, mode=511):**

Ensures that `dest` exists and is a directory.

Args:
  * name (str) - The name of the step.
  * dest (Path) - The directory to ensure.
  * mode (int) - The mode to use if the directory doesn't exist. This method
    does not ensure the mode if the directory already exists (if you need
    that behaviour, file a bug).

Raises file.Error if the path exists but is not a directory.

&mdash; **def [filesizes](/recipe_modules/file/api.py#260)(self, name, files, test_data=None):**

Returns list of filesizes for the given files.

Args:
  * name (str) - The name of the step.
  * files (list[Path]) - Paths to files.

Returns list[int], size of each file in bytes.

&mdash; **def [glob\_paths](/recipe_modules/file/api.py#178)(self, name, source, pattern, test_data=()):**

Performs glob expansion on `pattern`.

glob rules for `pattern` follow the same syntax as for the python `glob`
stdlib module.

Args:
  * name (str) - The name of the step.
  * source (Path) - The directory whose contents should be globbed.
  * pattern (str) - The glob pattern to apply under `source`.
  * test_data (iterable[str]) - Some default data for this step to return when
    running under simulation. This should be the list of file items found
    in this directory.

Returns list[Path] - All paths found.

Raises file.Error.

&mdash; **def [listdir](/recipe_modules/file/api.py#220)(self, name, source, test_data=()):**

List all files inside a directory.

Args:
  * name (str) - The name of the step.
  * source (Path) - The directory to list.
  * test_data (iterable[str]) - Some default data for this step to return when
    running under simulation. This should be the list of file items found
    in this directory.

Returns list[Path]

Raises file.Error.

&mdash; **def [move](/recipe_modules/file/api.py#94)(self, name, source, dest):**

Moves a file or directory.

Behaves identically to shutil.move.

Args:
  * name (str) - The name of the step.
  * source (Path) - The path of the item to move.
  * dest (Path) - The new name of the item.

Raises file.Error

&mdash; **def [read\_raw](/recipe_modules/file/api.py#112)(self, name, source, test_data=''):**

Reads a file as raw data.

Args:
  * name (str) - The name of the step.
  * source (Path) - The path of the file to read.
  * test_data (str) - Some default data for this step to return when running
    under simulation.

Returns (str) - The unencoded (binary) contents of the file.

Raises file.Error

&mdash; **def [read\_text](/recipe_modules/file/api.py#145)(self, name, source, test_data=''):**

Reads a file as UTF-8 encoded text.

Args:
  * name (str) - The name of the step.
  * source (Path) - The path of the file to read.
  * test_data (str) - Some default data for this step to return when running
    under simulation.

Returns (str) - The content of the file.

Raises file.Error

&mdash; **def [remove](/recipe_modules/file/api.py#205)(self, name, source):**

Remove a file.

Does not raise Error if the file doesn't exist.

Args:
  * name (str) - The name of the step.
  * source (Path) - The file to remove.

Raises file.Error.

&mdash; **def [rmcontents](/recipe_modules/file/api.py#299)(self, name, source):**

Similar to rmtree, but removes only contents not the directory.

This is useful e.g. when removing contents of current working directory.
Deleting current working directory makes all further getcwd calls fail
until chdir is called. chdir would be tricky in recipes, so we provide
a call that doesn't delete the directory itself.

Args:
  * name (str) - The name of the step.
  * source (Path) - The directory whose contents should be removed.

Raises file.Error.

&mdash; **def [rmglob](/recipe_modules/file/api.py#317)(self, name, source, pattern):**

Removes all entries in `source` matching the glob `pattern`.

Args:
  * name (str) - The name of the step.
  * source (Path) - The directory whose contents should be filtered and
    removed.
  * pattern (str) - The glob pattern to apply under `source`. Anything
    matching this pattern will be removed.

Raises file.Error.

&mdash; **def [rmtree](/recipe_modules/file/api.py#282)(self, name, source):**

Recursively removes a directory.

This uses a native python on Linux/Mac, and uses `rd` on Windows to avoid
issues w.r.t. path lengths and read-only attributes. If the directory is
gone already, this returns without error.

Args:
  * name (str) - The name of the step.
  * source (Path) - The directory to remove.

Raises file.Error.

&mdash; **def [symlink](/recipe_modules/file/api.py#338)(self, name, source, link):**

Creates a symlink from link to source on the local filesystem.

Behaves identically to os.symlink.

Args:
  * name (str) - The name of the step.
  * source (Path|Placeholder) - The path to link to.
  * link (Path|Placeholder) - The link to create.

Raises file.Error

&mdash; **def [truncate](/recipe_modules/file/api.py#355)(self, name, path, size_mb=100):**

Creates an empty file with path and size_mb on the local filesystem.

Args:
  * name (str) - The name of the step.
  * path (Path|str) - The absolute path to create.
  * size_mb (int) - The size of the file in megabytes. Defaults to 100

Raises file.Error

&mdash; **def [write\_raw](/recipe_modules/file/api.py#131)(self, name, dest, data):**

Write the given `data` to `dest`.

Args:
  * name (str) - The name of the step.
  * dest (Path) - The path of the file to write.
  * data (str) - The data to write.

Raises file.Error.

&mdash; **def [write\_text](/recipe_modules/file/api.py#164)(self, name, dest, text_data):**

Write the given UTF-8 encoded `text_data` to `dest`.

Args:
  * name (str) - The name of the step.
  * dest (Path) - The path of the file to write.
  * text_data (str) - The UTF-8 encoded data to write.

Raises file.Error.
### *recipe_modules* / [generator\_script](/recipe_modules/generator_script)

[DEPS](/recipe_modules/generator_script/__init__.py#5): [context](#recipe_modules-context), [json](#recipe_modules-json), [path](#recipe_modules-path), [python](#recipe_modules-python), [step](#recipe_modules-step)

A simplistic method for running steps generated by an external script.

This module was created before there was a way to put recipes directly into
another repo. It is not recommended to use this, and it will be removed in the
near future.

#### **class [GeneratorScriptApi](/recipe_modules/generator_script/api.py#16)([RecipeApi](/recipe_engine/recipe_api.py#997)):**

&mdash; **def [\_\_call\_\_](/recipe_modules/generator_script/api.py#43)(self, path_to_script, \*args):**

Run a script and generate the steps emitted by that script.

The script will be invoked with --output-json /path/to/file.json. The script
is expected to exit 0 and write steps into that file. Once the script
outputs all of the steps to that file, the recipe will read the steps from
that file and execute them in order. Any *args specified will be
additionally passed to the script.

The step data is formatted as a list of JSON objects. Each object
corresponds to one step, and contains the following keys:
  * name: the name of this step.
  * cmd: a list of strings that indicate the command to run (e.g. argv)
  * env: a {key:value} dictionary of the environment variables to override.
   every value is formatted with the current environment with the python
   % operator, so a value of "%(PATH)s:/some/other/path" would resolve to
   the current PATH value, concatenated with ":/some/other/path"
  * cwd: an absolute path to the current working directory for this script.
  * always_run: a bool which indicates that this step should run, even if
    some previous step failed.
  * outputs_presentation_json: a bool which indicates that this step will
    emit a presentation json file. If this is True, the cmd will be extended
    with a `--presentation-json /path/to/file.json`. This file will be used
    to update the step's presentation on the build status page. The file
    will be expected to contain a single json object, with any of the
    following keys:
      * logs: {logname: [lines]} specifies one or more auxillary logs.
      * links: {link_name: link_content} to add extra links to the step.
      * step_summary_text: A string to set as the step summary.
      * step_text: A string to set as the step text.
      * properties: {prop: value} build_properties to add to the build
        status page. Note that these are write-only: The only way to read
        them is via the status page. There is intentionally no mechanism to
        read them back from inside of the recipes.
  * allow_subannotations: allow this step to emit legacy buildbot
    subannotations. If you don't know what this is, you shouldn't use it. If
    you know what it is, you also shouldn't use it.
### *recipe_modules* / [json](/recipe_modules/json)

[DEPS](/recipe_modules/json/__init__.py#5): [properties](#recipe_modules-properties), [python](#recipe_modules-python), [raw\_io](#recipe_modules-raw_io)

Methods for producing and consuming JSON.

#### **class [JsonApi](/recipe_modules/json/api.py#83)([RecipeApi](/recipe_engine/recipe_api.py#997)):**

&emsp; **@[returns\_placeholder](/recipe_engine/util.py#120)**<br>&mdash; **def [input](/recipe_modules/json/api.py#102)(self, data):**

A placeholder which will expand to a file path containing <data>.

&mdash; **def [is\_serializable](/recipe_modules/json/api.py#94)(self, obj):**

Returns True if the object is JSON-serializable.

&emsp; **@staticmethod**<br>&mdash; **def [loads](/recipe_modules/json/api.py#88)(data, \*\*kwargs):**

Works like `json.loads`, but strips out unicode objects (replacing them
with utf8-encoded str objects).

&emsp; **@[returns\_placeholder](/recipe_engine/util.py#120)**<br>&mdash; **def [output](/recipe_modules/json/api.py#107)(self, add_json_log=True, name=None, leak_to=None):**

A placeholder which will expand to '/tmp/file'.

If leak_to is provided, it must be a Path object. This path will be used in
place of a random temporary file, and the file will not be deleted at the
end of the step.

Args:
  * add_json_log (True|False|'on_failure') - Log a copy of the output json
    to a step link named `name`. If this is 'on_failure', only create this
    log when the step has a non-SUCCESS status.

&mdash; **def [read](/recipe_modules/json/api.py#123)(self, name, path, add_json_log=True, output_name=None, \*\*kwargs):**

Returns a step that reads a JSON file.
### *recipe_modules* / [path](/recipe_modules/path)

[DEPS](/recipe_modules/path/__init__.py#5): [platform](#recipe_modules-platform), [properties](#recipe_modules-properties)

All functions related to manipulating paths in recipes.

Recipes handle paths a bit differently than python does. All path manipulation
in recipes revolves around Path objects. These objects store a base path (always
absolute), plus a list of components to join with it. New paths can be derived
by calling the .join method with additional components.

In this way, all paths in Recipes are absolute, and are constructed from a small
collection of anchor points. The built-in anchor points are:
  * `api.path['start_dir']` - This is the directory that the recipe started in.
    it's similar to `cwd`, except that it's constant.
  * `api.path['cache']` - This directory is provided by whatever's running the
    recipe. Files and directories created under here /may/ be evicted in between
    runs of the recipe (i.e. to relieve disk pressure).
  * `api.path['cleanup']` - This directory is provided by whatever's running the
    recipe. Files and directories created under here /are guaranteed/ to be
    evicted in between runs of the recipe. Additionally, this directory is
    guaranteed to be empty when the recipe starts.
  * `api.path['tmp_base']` - This directory is the system-configured temp dir.
    This is a weaker form of 'cleanup', and its use should be avoided. This may
    be removed in the future (or converted to an alias of 'cleanup').
  * `api.path['checkout']` - This directory is set by various 'checkout' modules
    in recipes. It was originally intended to make recipes easier to read and
    make code somewhat generic or homogenous, but this was a mistake. New code
    should avoid 'checkout', and instead just explicitly pass paths around. This
    path may be removed in the future.

There are other anchor points which can be defined (e.g. by the
`depot_tools/infra_paths` module). Refer to those modules for additional
documentation.

#### **class [PathApi](/recipe_modules/path/api.py#197)([RecipeApi](/recipe_engine/recipe_api.py#997)):**

&mdash; **def [\_\_getitem\_\_](/recipe_modules/path/api.py#422)(self, name):**

Gets the base path named `name`. See module docstring for more
information.

&mdash; **def [abs\_to\_path](/recipe_modules/path/api.py#352)(self, abs_string_path):**

Converts an absolute path string `string_path` to a real Path object,
using the most appropriate known base path.

  * abs_string_path MUST be an absolute path
  * abs_string_path MUST be rooted in one of the configured base paths known
    to the path module.

This method will find the longest match in all the following:
  * module resource paths
  * recipe resource paths
  * package repo paths
  * dynamic_paths
  * base_paths

Example:
```
# assume [START_DIR] == "/basis/dir/for/recipe"
api.path.abs_to_path("/basis/dir/for/recipe/some/other/dir") ->
  Path("[START_DIR]/some/other/dir")
```

Raises an ValueError if the preconditions are not met, otherwise returns the
Path object.

&mdash; **def [assert\_absolute](/recipe_modules/path/api.py#327)(self, path):**

Raises AssertionError if the given path is not an absolute path.

Args:
  * path (Path|str) - The path to check.

&mdash; **def [get](/recipe_modules/path/api.py#415)(self, name, default=None):**

Gets the base path named `name`. See module docstring for more
information.

&mdash; **def [get\_config\_defaults](/recipe_modules/path/api.py#209)(self):**

Internal recipe implementation function.

&mdash; **def [initialize](/recipe_modules/path/api.py#271)(self):**

Internal recipe implementation function.

&mdash; **def [mkdtemp](/recipe_modules/path/api.py#335)(self, prefix):**

Makes a new temporary directory, returns Path to it.

&mdash; **def [mock\_add\_paths](/recipe_modules/path/api.py#306)(self, path):**

For testing purposes, mark that |path| exists.

&mdash; **def [mock\_copy\_paths](/recipe_modules/path/api.py#311)(self, source, dest):**

For testing purposes, copy |source| to |dest|.

&mdash; **def [mock\_remove\_paths](/recipe_modules/path/api.py#316)(self, path, filt=(lambda p: True)):**

For testing purposes, assert that |path| doesn't exist.

Args:
  * path (str|Path) - The path to remove.
  * filt (func[str] bool) - Called for every candidate path. Return
    True to remove this path.
### *recipe_modules* / [platform](/recipe_modules/platform)

Mockable system platform identity functions.

#### **class [PlatformApi](/recipe_modules/platform/api.py#18)([RecipeApi](/recipe_engine/recipe_api.py#997)):**

Provides host-platform-detection properties.

Mocks:
  * name (str): A value equivalent to something that might be returned by
    sys.platform.
  * bits (int): Either 32 or 64.

&emsp; **@property**<br>&mdash; **def [arch](/recipe_modules/platform/api.py#93)(self):**

Returns the current CPU architecture.

TODO: This is currently always hard-coded to 'intel'... Apparently no one
has actually needed this function?

&emsp; **@property**<br>&mdash; **def [bits](/recipe_modules/platform/api.py#83)(self):**

Returns the bitness of the userland for the current system (either 32 or
64 bit).

TODO: If anyone needs to query for the kernel bitness, another accessor
should be added.

&emsp; **@property**<br>&mdash; **def [cpu\_count](/recipe_modules/platform/api.py#102)(self):**

The number of CPU cores, according to multiprocessing.cpu_count().

&emsp; **@property**<br>&mdash; **def [is\_linux](/recipe_modules/platform/api.py#69)(self):**

Returns True iff the recipe is running on Linux.

&emsp; **@property**<br>&mdash; **def [is\_mac](/recipe_modules/platform/api.py#64)(self):**

Returns True iff the recipe is running on OS X.

&emsp; **@property**<br>&mdash; **def [is\_win](/recipe_modules/platform/api.py#59)(self):**

Returns True iff the recipe is running on Windows.

&emsp; **@property**<br>&mdash; **def [name](/recipe_modules/platform/api.py#74)(self):**

Returns the current platform name which will be in:
* win
* mac
* linux

&emsp; **@staticmethod**<br>&mdash; **def [normalize\_platform\_name](/recipe_modules/platform/api.py#107)(plat):**

One of python's sys.platform values -> 'win', 'linux' or 'mac'.
### *recipe_modules* / [properties](/recipe_modules/properties)

Provides access to the recipes input properties.

Every recipe is run with a JSON object called "properties". These contain all
inputs to the recipe. Some common examples would be properties like "revision",
which the build scheduler sets to tell a recipe to build/test a certain
revision.

The properties that affect a particular recipe are defined by the recipe itself,
and this module provides access to them.

Recipe properties are read-only; the values obtained via this API reflect the
values provided to the recipe engine at the beginning of execution. There is
intentionally no API to write property values (lest they become a kind of
random-access global variable).

#### **class [PropertiesApi](/recipe_modules/properties/api.py#28)([RecipeApiPlain](/recipe_engine/recipe_api.py#865), collections.Mapping):**

PropertiesApi implements all the standard Mapping functions, so you
can use it like a read-only dict.

&mdash; **def [legacy](/recipe_modules/properties/api.py#54)(self):**

DEPRECATED: Returns a set of properties, possibly used by legacy
scripts.

This excludes any recipe module-specific properties (i.e. those beginning
with `$`).

Instead of passing all of the properties as a blob, please consider passing
specific arguments to scripts that need them. Doing this makes it much
easier to debug and diagnose which scripts use which properties.

&mdash; **def [thaw](/recipe_modules/properties/api.py#78)(self):**

Returns a read-write copy of all of the properties.
### *recipe_modules* / [python](/recipe_modules/python)

[DEPS](/recipe_modules/python/__init__.py#5): [context](#recipe_modules-context), [raw\_io](#recipe_modules-raw_io), [step](#recipe_modules-step)

Provides methods for running python scripts correctly.

This includes support for `vpython`, and knows how to specify parameters
correctly for bots (e.g. ensuring that python is working on Windows, passing the
unbuffered flag, etc.)

#### **class [PythonApi](/recipe_modules/python/api.py#17)([RecipeApi](/recipe_engine/recipe_api.py#997)):**

&mdash; **def [\_\_call\_\_](/recipe_modules/python/api.py#18)(self, name, script, args=None, unbuffered=True, venv=None, \*\*kwargs):**

Return a step to run a python script with arguments.

**TODO**: We should just use a single "args" list. Having "script"
separate but required/first leads to weird things like:

    (... script='-m', args=['module'])

Args:
  * name (str): The name of the step.
  * script (str or Path): The Path of the script to run, or the first
      command-line argument to pass to Python.
  * args (list or None): If not None, additional arguments to pass to the
      Python command.
  * unbuffered (bool): If True, run Python in unbuffered mode.
  * venv (None or False or True or Path): If True, run the script through
      "vpython". This will, by default, probe the target script for a
      configured VirtualEnv and, failing that, use an empty VirtualEnv. If a
      Path, this is a path to an explicit "vpython" VirtualEnv spec file to
      use. If False or None (default), the script will be run through the
      standard Python interpreter.
  * kwargs: Additional keyword arguments to forward to "step".

**Returns (`types.StepData`)** - The StepData object as returned by
api.step.

&mdash; **def [failing\_step](/recipe_modules/python/api.py#110)(self, name, text, as_log=None):**

Runs a succeeding step (exits 1).

&mdash; **def [inline](/recipe_modules/python/api.py#63)(self, name, program, add_python_log=True, \*\*kwargs):**

Run an inline python program as a step.

Program is output to a temp file and run when this step executes.

Args:
  * name (str) - The name of the step
  * program (str) - The literal python program text. This will be dumped to
    a file and run like `python /path/to/file.py`
  * add_python_log (bool) - Whether to add a 'python.inline' link on this
    step on the build page. If true, the link will point to a log with
    a copy of `program`.

**Returns (`types.StepData`)** - The StepData object as returned by
api.step.

&mdash; **def [result\_step](/recipe_modules/python/api.py#91)(self, name, text, retcode, as_log=None):**

Runs a no-op step that exits with a specified return code.

&mdash; **def [succeeding\_step](/recipe_modules/python/api.py#106)(self, name, text, as_log=None):**

Runs a succeeding step (exits 0).
### *recipe_modules* / [raw\_io](/recipe_modules/raw_io)

Provides objects for reading and writing raw data to and from steps.

#### **class [RawIOApi](/recipe_modules/raw_io/api.py#173)([RecipeApi](/recipe_engine/recipe_api.py#997)):**

&emsp; **@[returns\_placeholder](/recipe_engine/util.py#120)**<br>&emsp; **@staticmethod**<br>&mdash; **def [input](/recipe_modules/raw_io/api.py#174)(data, suffix=''):**

Returns a Placeholder for use as a step argument.

This placeholder can be used to pass data to steps. The recipe engine will
dump the 'data' into a file, and pass the filename to the command line
argument.

data MUST be of type 'str' (not basestring, not unicode).

If 'suffix' is not '', it will be used when the engine calls
tempfile.mkstemp.

See examples/full.py for usage example.

&emsp; **@[returns\_placeholder](/recipe_engine/util.py#120)**<br>&emsp; **@staticmethod**<br>&mdash; **def [input\_text](/recipe_modules/raw_io/api.py#192)(data, suffix=''):**

Returns a Placeholder for use as a step argument.

data MUST be of type 'str' (not basestring, not unicode). The str is
expected to have valid utf-8 data in it.

Similar to input(), but ensures that 'data' is valid utf-8 text. Any
non-utf-8 characters will be replaced with �.

&emsp; **@[returns\_placeholder](/recipe_engine/util.py#120)**<br>&emsp; **@staticmethod**<br>&mdash; **def [output](/recipe_modules/raw_io/api.py#205)(suffix='', leak_to=None, name=None):**

Returns a Placeholder for use as a step argument, or for std{out,err}.

If 'leak_to' is None, the placeholder is backed by a temporary file with
a suffix 'suffix'. The file is deleted when the step finishes.

If 'leak_to' is not None, then it should be a Path and placeholder
redirects IO to a file at that path. Once step finishes, the file is
NOT deleted (i.e. it's 'leaking'). 'suffix' is ignored in that case.

&emsp; **@[returns\_placeholder](/recipe_engine/util.py#120)**<br>&emsp; **@staticmethod**<br>&mdash; **def [output\_dir](/recipe_modules/raw_io/api.py#231)(suffix='', leak_to=None, name=None):**

Returns a directory Placeholder for use as a step argument.

If 'leak_to' is None, the placeholder is backed by a temporary dir with
a suffix 'suffix'. The dir is deleted when the step finishes.

If 'leak_to' is not None, then it should be a Path and placeholder
redirects IO to a dir at that path. Once step finishes, the dir is
NOT deleted (i.e. it's 'leaking'). 'suffix' is ignored in that case.

&emsp; **@[returns\_placeholder](/recipe_engine/util.py#120)**<br>&emsp; **@staticmethod**<br>&mdash; **def [output\_text](/recipe_modules/raw_io/api.py#219)(suffix='', leak_to=None, name=None):**

Returns a Placeholder for use as a step argument, or for std{out,err}.

Similar to output(), but uses an OutputTextPlaceholder, which expects utf-8
encoded text.
Similar to input(), but tries to decode the resulting data as utf-8 text,
replacing any decoding errors with �.
### *recipe_modules* / [runtime](/recipe_modules/runtime)

[DEPS](/recipe_modules/runtime/__init__.py#5): [path](#recipe_modules-path), [properties](#recipe_modules-properties)

#### **class [RuntimeApi](/recipe_modules/runtime/api.py#8)([RecipeApi](/recipe_engine/recipe_api.py#997)):**

This module assists in experimenting with production recipes.

For example, when migrating builders from Buildbot to pure LUCI stack.

&emsp; **@property**<br>&mdash; **def [is\_experimental](/recipe_modules/runtime/api.py#26)(self):**

True if this recipe is currently running in experimental mode.

Typical usage is to modify steps which produce external side-effects so that
non-production runs of the recipe do not affect production data.

Examples:
  * Uploading to an alternate google storage file name when in non-prod mode
  * Appending a 'non-production' tag to external RPCs

&emsp; **@property**<br>&mdash; **def [is\_luci](/recipe_modules/runtime/api.py#18)(self):**

True if this recipe is currently running on LUCI stack.

Should be used only during migration from Buildbot to LUCI stack.
### *recipe_modules* / [service\_account](/recipe_modules/service_account)

[DEPS](/recipe_modules/service_account/__init__.py#5): [path](#recipe_modules-path), [platform](#recipe_modules-platform), [raw\_io](#recipe_modules-raw_io), [step](#recipe_modules-step)

API for getting OAuth2 access tokens for LUCI tasks or private keys.

This is a thin wrapper over the authutil go executable, which itself calls
https://godoc.org/go.chromium.org/luci/client/authcli

Depends on authutil to be in PATH.

#### **class [ServiceAccountApi](/recipe_modules/service_account/api.py#16)([RecipeApi](/recipe_engine/recipe_api.py#997)):**

&mdash; **def [default](/recipe_modules/service_account/api.py#49)(self):**

Returns an account associated with the task.

On LUCI, this is default account exposed through LUCI_CONTEXT["local_auth"]
protocol. When running locally this is an account the user logged in via
"authutil login ..." command prior to running the recipe.

&mdash; **def [from\_credentials\_json](/recipe_modules/service_account/api.py#58)(self, key_path):**

Returns a service account based on a JSON credentials file.

This is the file generated by Cloud Console when creating a service account
key. It contains the private key inside.

Args:
  key_path: (str|Path) object pointing to a service account JSON key.
### *recipe_modules* / [source\_manifest](/recipe_modules/source_manifest)

#### **class [SourceManfiestApi](/recipe_modules/source_manifest/api.py#32)([RecipeApi](/recipe_engine/recipe_api.py#997)):**

&mdash; **def [set\_json\_manifest](/recipe_modules/source_manifest/api.py#35)(self, name, data):**

Uploads a source manifest with the given name.

NOTE: Due to current implementation restrictions, this method may only be
called after some step has been run from the recipe. Calling this before
running any steps is invalid and will fail. We hope to lift this restriction
sometime after we don't need to support buildbot any more.

# TODO(iannucci): remove this restriction.

Args:
  * name (str) - the name of the manifest. These names must be valid LogDog
    stream names, and must be unique within a recipe run. e.g.
    * "main_checkout"
    * "bisect/deadbeef"
  * data (dict) - the JSONPB representation of the source_manifest.proto
    Manifest message.
### *recipe_modules* / [step](/recipe_modules/step)

[DEPS](/recipe_modules/step/__init__.py#8): [context](#recipe_modules-context), [path](#recipe_modules-path)

Step is the primary API for running steps (external programs, scripts,
etc.).

#### **class [StepApi](/recipe_modules/step/api.py#19)([RecipeApiPlain](/recipe_engine/recipe_api.py#865)):**

&emsp; **@property**<br>&mdash; **def [InfraFailure](/recipe_modules/step/api.py#52)(self):**

InfraFailure is a subclass of StepFailure, and will translate to a purple
build.

This exception is raised from steps which are marked as `infra_step`s when
they fail.

&emsp; **@property**<br>&mdash; **def [StepFailure](/recipe_modules/step/api.py#34)(self):**

This is the base Exception class for all step failures.

It can be manually raised from recipe code to cause the build to turn red.

Usage:
  * `raise api.StepFailure("some reason")`
  * `except api.StepFailure:`

&emsp; **@property**<br>&mdash; **def [StepTimeout](/recipe_modules/step/api.py#62)(self):**

StepTimeout is a subclass of StepFailure and is raised when a step times
out.

&emsp; **@property**<br>&mdash; **def [StepWarning](/recipe_modules/step/api.py#46)(self):**

StepWarning is a subclass of StepFailure, and will translate to a yellow
build.

&emsp; **@recipe_api.composite_step**<br>&mdash; **def [\_\_call\_\_](/recipe_modules/step/api.py#128)(self, name, cmd, ok_ret=None, infra_step=False, wrapper=(), timeout=None, allow_subannotations=None, trigger_specs=None, stdout=None, stderr=None, stdin=None, step_test_data=None):**

Returns a step dictionary which is compatible with annotator.py.

Args:
  * name (string): The name of this step.
  * cmd (list of strings): in the style of subprocess.Popen or None to
    create a no-op fake step.
  * ok_ret (tuple or set of ints, str): allowed return codes. Any unexpected
    return codes will cause an exception to be thrown. If you pass in the
    value 'any' or 'all', the engine will allow any return code to be
    returned. Defaults to {0}
  * infra_step: Whether or not this is an infrastructure step.
    Infrastructure steps will place the step in an EXCEPTION state and raise
    InfraFailure.
  * wrapper: If supplied, a command to prepend to the executed step as a
    command wrapper.
  * timeout: If supplied, the recipe engine will kill the step after the
    specified number of seconds.
  * allow_subannotations (bool): if True, lets the step emit its own
      annotations. NOTE: Enabling this can cause some buggy behavior. Please
      strongly consider using step_result.presentation instead. If you have
      questions, please contact infra-dev@chromium.org.
  * trigger_specs: a list of trigger specifications
  * stdout: Placeholder to put step stdout into. If used, stdout won't
    appear in annotator's stdout (and |allow_subannotations| is ignored).
  * stderr: Placeholder to put step stderr into. If used, stderr won't
    appear in annotator's stderr.
  * stdin: Placeholder to read step stdin from.
  * step_test_data (func -> recipe_test_api.StepTestData): A factory which
      returns a StepTestData object that will be used as the default test
      data for this step. The recipe author can override/augment this object
      in the GenTests function.

Returns a `types.StepData` for the running step.

&emsp; **@property**<br>&mdash; **def [active\_result](/recipe_modules/step/api.py#68)(self):**

The currently active (open) result from the last step that was run. This
is a `types.StepData` object.

Allows you to do things like:
```python
try:
  api.step('run test', [..., api.json.output()])
finally:
  result = api.step.active_result
  if result.json.output:
    new_step_text = result.json.output['step_text']
    api.step.active_result.presentation.step_text = new_step_text
```

This will update the step_text of the test, even if the test fails. Without
this api, the above code would look like:

```python
try:
  result = api.step('run test', [..., api.json.output()])
except api.StepFailure as f:
  result = f.result
  raise
finally:
  if result.json.output:
    new_step_text = result.json.output['step_text']
    api.step.active_result.presentation.step_text = new_step_text
```

&emsp; **@property**<br>&mdash; **def [defer\_results](/recipe_modules/step/api.py#123)(self):**

See recipe_api.py for docs. 

&emsp; **@contextlib.contextmanager**<br>&mdash; **def [nest](/recipe_modules/step/api.py#101)(self, name):**

Nest allows you to nest steps hierarchically on the build UI.

Calling
```python
with api.step.nest(<name>):
  ...
```

will generate a dummy step with the provided name. All other steps run
within this with statement will be hidden from the UI by default under this
dummy step in a collapsible hierarchy. Nested blocks can also nest within
each other.

The nesting is implemented by adjusting the 'name' and 'nest_level' fields
of the context (see the context() method above).
### *recipe_modules* / [tempfile](/recipe_modules/tempfile)

[DEPS](/recipe_modules/tempfile/__init__.py#5): [file](#recipe_modules-file), [path](#recipe_modules-path)

Simplistic temporary directory manager (deprecated).

#### **class [TempfileApi](/recipe_modules/tempfile/api.py#12)([RecipeApi](/recipe_engine/recipe_api.py#997)):**

&emsp; **@contextlib.contextmanager**<br>&mdash; **def [temp\_dir](/recipe_modules/tempfile/api.py#13)(self, prefix):**

This makes a temporary directory which lives for the scope of the with
statement.

Example:
```python
with api.tempfile.temp_dir("some_prefix") as path:
  # use path
# path is deleted here.
```
### *recipe_modules* / [time](/recipe_modules/time)

Allows mockable access to the current time.

#### **class [TimeApi](/recipe_modules/time/api.py#12)([RecipeApi](/recipe_engine/recipe_api.py#997)):**

&mdash; **def [time](/recipe_modules/time/api.py#21)(self):**

Return current timestamp as a float number of seconds since epoch.

&mdash; **def [utcnow](/recipe_modules/time/api.py#29)(self):**

Return current UTC time as a datetime.datetime.
### *recipe_modules* / [url](/recipe_modules/url)

[DEPS](/recipe_modules/url/__init__.py#5): [context](#recipe_modules-context), [json](#recipe_modules-json), [path](#recipe_modules-path), [python](#recipe_modules-python), [raw\_io](#recipe_modules-raw_io)

Methods for interacting with HTTP(s) URLs.

#### **class [UrlApi](/recipe_modules/url/api.py#15)([RecipeApi](/recipe_engine/recipe_api.py#997)):**

&mdash; **def [get\_file](/recipe_modules/url/api.py#130)(self, url, path, step_name=None, headers=None, transient_retry=True, strip_prefix=None, timeout=None):**

GET data at given URL and writes it to file.

Args:
  * url: URL to request.
  * path (Path): the Path where the content will be written.
  * step_name: optional step name, 'fetch <url>' by default.
  * headers: a {header_name: value} dictionary for HTTP headers.
  * transient_retry (bool or int): Determines how transient HTTP errorts
      (>500) will be retried. If True (default), errors will be retried up
      to 10 times. If False, no transient retries will occur. If an integer
      is supplied, this is the number of transient retries to perform. All
      retries have exponential backoff applied.
  * strip_prefix (str or None): If not None, this prefix must be present at
      the beginning of the response, and will be stripped from the resulting
      content (e.g., GERRIT_JSON_PREFIX).
  * timeout: Timeout (see step.__call__).

**Returns (UrlApi.Response)** - Response with "path" as its "output" value.

**Raises:**
  * HTTPError, InfraHTTPError: if the request failed.
  * ValueError: If the request was invalid.

&mdash; **def [get\_json](/recipe_modules/url/api.py#186)(self, url, step_name=None, headers=None, transient_retry=True, strip_prefix=None, log=False, timeout=None, default_test_data=None):**

GET data at given URL and writes it to file.

Args:
  * url: URL to request.
  * step_name: optional step name, 'fetch <url>' by default.
  * headers: a {header_name: value} dictionary for HTTP headers.
  * transient_retry (bool or int): Determines how transient HTTP errorts
      (>500) will be retried. If True (default), errors will be retried up
      to 10 times. If False, no transient retries will occur. If an integer
      is supplied, this is the number of transient retries to perform. All
      retries have exponential backoff applied.
  * strip_prefix (str or None): If not None, this prefix must be present at
      the beginning of the response, and will be stripped from the resulting
      content (e.g., GERRIT_JSON_PREFIX).
  * log (bool): If True, emit the JSON content as a log.
  * timeout: Timeout (see step.__call__).
  * default_test_data (jsonish): If provided, use this as the unmarshalled
      JSON result when testing if no overriding data is available.

**Returns (UrlApi.Response)** - Response with the JSON as its "output"
value.

**Raises:**
  * HTTPError, InfraHTTPError: if the request failed.
  * ValueError: If the request was invalid.

&mdash; **def [get\_text](/recipe_modules/url/api.py#158)(self, url, step_name=None, headers=None, transient_retry=True, timeout=None, default_test_data=None):**

GET data at given URL and writes it to file.

Args:
  * url: URL to request.
  * step_name: optional step name, 'fetch <url>' by default.
  * headers: a {header_name: value} dictionary for HTTP headers.
  * transient_retry (bool or int): Determines how transient HTTP errorts
      (>500) will be retried. If True (default), errors will be retried up
      to 10 times. If False, no transient retries will occur. If an integer
      is supplied, this is the number of transient retries to perform. All
      retries have exponential backoff applied.
  * timeout: Timeout (see step.__call__).
  * default_test_data (str): If provided, use this as the text output when
      testing if no overriding data is available.

**Returns (UrlApi.Response)** - Response with the content as its output
value.

**Raises:**
  * HTTPError, InfraHTTPError: if the request failed.
  * ValueError: If the request was invalid.

&mdash; **def [join](/recipe_modules/url/api.py#94)(self, \*parts):**

Constructs a URL path from composite parts.

Args:
  * parts (str...): Strings to concastenate. Any leading or trailing slashes
      will be stripped from intermediate strings to ensure that they join
      together. Trailing slashes will not be stripped from the last part.

&mdash; **def [validate\_url](/recipe_modules/url/api.py#110)(self, v):**

Validates that "v" is a valid URL.

A valid URL has a scheme and netloc, and must begin with HTTP or HTTPS.

Args:
  * v (str): The URL to validate.

**Returns (bool)** - True if the URL is considered secure, False if not.

**Raises:**
  * ValueError: if "v" is not valid.
## Recipes

### *recipes* / [buildbucket:examples/full](/recipe_modules/buildbucket/examples/full.py)

[DEPS](/recipe_modules/buildbucket/examples/full.py#7): [buildbucket](#recipe_modules-buildbucket), [platform](#recipe_modules-platform), [properties](#recipe_modules-properties), [raw\_io](#recipe_modules-raw_io), [step](#recipe_modules-step)

This file is a recipe demonstrating the buildbucket recipe module.

&mdash; **def [RunSteps](/recipe_modules/buildbucket/examples/full.py#16)(api):**
### *recipes* / [buildbucket:tests/get](/recipe_modules/buildbucket/tests/get.py)

[DEPS](/recipe_modules/buildbucket/tests/get.py#5): [buildbucket](#recipe_modules-buildbucket)

&mdash; **def [RunSteps](/recipe_modules/buildbucket/tests/get.py#10)(api):**
### *recipes* / [buildbucket:tests/properties](/recipe_modules/buildbucket/tests/properties.py)

[DEPS](/recipe_modules/buildbucket/tests/properties.py#5): [buildbucket](#recipe_modules-buildbucket), [properties](#recipe_modules-properties), [step](#recipe_modules-step)

&mdash; **def [RunSteps](/recipe_modules/buildbucket/tests/properties.py#12)(api):**
### *recipes* / [buildbucket:tests/put](/recipe_modules/buildbucket/tests/put.py)

[DEPS](/recipe_modules/buildbucket/tests/put.py#5): [buildbucket](#recipe_modules-buildbucket), [properties](#recipe_modules-properties), [runtime](#recipe_modules-runtime)

&mdash; **def [RunSteps](/recipe_modules/buildbucket/tests/put.py#12)(api):**
### *recipes* / [context:examples/full](/recipe_modules/context/examples/full.py)

[DEPS](/recipe_modules/context/examples/full.py#7): [context](#recipe_modules-context), [path](#recipe_modules-path), [raw\_io](#recipe_modules-raw_io), [step](#recipe_modules-step)

&mdash; **def [RunSteps](/recipe_modules/context/examples/full.py#15)(api):**
### *recipes* / [context:tests/cwd](/recipe_modules/context/tests/cwd.py)

[DEPS](/recipe_modules/context/tests/cwd.py#5): [context](#recipe_modules-context), [path](#recipe_modules-path), [step](#recipe_modules-step)

&mdash; **def [RunSteps](/recipe_modules/context/tests/cwd.py#11)(api):**
### *recipes* / [context:tests/env](/recipe_modules/context/tests/env.py)

[DEPS](/recipe_modules/context/tests/env.py#5): [context](#recipe_modules-context), [path](#recipe_modules-path), [raw\_io](#recipe_modules-raw_io), [step](#recipe_modules-step)

&mdash; **def [RunSteps](/recipe_modules/context/tests/env.py#19)(api):**
### *recipes* / [context:tests/increment\_nest\_level](/recipe_modules/context/tests/increment_nest_level.py)

[DEPS](/recipe_modules/context/tests/increment_nest_level.py#5): [context](#recipe_modules-context), [path](#recipe_modules-path), [step](#recipe_modules-step)

&mdash; **def [RunSteps](/recipe_modules/context/tests/increment_nest_level.py#12)(api):**
### *recipes* / [context:tests/infra\_step](/recipe_modules/context/tests/infra_step.py)

[DEPS](/recipe_modules/context/tests/infra_step.py#5): [context](#recipe_modules-context), [path](#recipe_modules-path), [step](#recipe_modules-step)

&mdash; **def [RunSteps](/recipe_modules/context/tests/infra_step.py#11)(api):**
### *recipes* / [engine\_tests/bad\_subprocess](/recipes/engine_tests/bad_subprocess.py)

[DEPS](/recipes/engine_tests/bad_subprocess.py#7): [python](#recipe_modules-python)

Tests that daemons that hang on to STDOUT can't cause the engine to hang.

&mdash; **def [RunSteps](/recipes/engine_tests/bad_subprocess.py#11)(api):**
### *recipes* / [engine\_tests/depend\_on/bad\_properties](/recipes/engine_tests/depend_on/bad_properties.py)

[DEPS](/recipes/engine_tests/depend_on/bad_properties.py#8): [properties](#recipe_modules-properties)

&mdash; **def [RunSteps](/recipes/engine_tests/depend_on/bad_properties.py#20)(api):**
### *recipes* / [engine\_tests/depend\_on/bottom](/recipes/engine_tests/depend_on/bottom.py)

[DEPS](/recipes/engine_tests/depend_on/bottom.py#8): [properties](#recipe_modules-properties), [raw\_io](#recipe_modules-raw_io), [step](#recipe_modules-step)

&mdash; **def [RunSteps](/recipes/engine_tests/depend_on/bottom.py#22)(api, number):**
### *recipes* / [engine\_tests/depend\_on/dont\_need\_properties](/recipes/engine_tests/depend_on/dont_need_properties.py)

[DEPS](/recipes/engine_tests/depend_on/dont_need_properties.py#8): [properties](#recipe_modules-properties)

&mdash; **def [RunSteps](/recipes/engine_tests/depend_on/dont_need_properties.py#14)(api):**
### *recipes* / [engine\_tests/depend\_on/dont\_need\_properties\_helper](/recipes/engine_tests/depend_on/dont_need_properties_helper.py)

[DEPS](/recipes/engine_tests/depend_on/dont_need_properties_helper.py#8): [properties](#recipe_modules-properties)

&mdash; **def [RunSteps](/recipes/engine_tests/depend_on/dont_need_properties_helper.py#19)(api):**
### *recipes* / [engine\_tests/depend\_on/need\_return\_schema](/recipes/engine_tests/depend_on/need_return_schema.py)

[DEPS](/recipes/engine_tests/depend_on/need_return_schema.py#8): [properties](#recipe_modules-properties)

&mdash; **def [RunSteps](/recipes/engine_tests/depend_on/need_return_schema.py#18)(api):**
### *recipes* / [engine\_tests/depend\_on/need\_return\_schema\_helper](/recipes/engine_tests/depend_on/need_return_schema_helper.py)

[DEPS](/recipes/engine_tests/depend_on/need_return_schema_helper.py#8): [properties](#recipe_modules-properties)

&mdash; **def [RunSteps](/recipes/engine_tests/depend_on/need_return_schema_helper.py#16)(api):**
### *recipes* / [engine\_tests/depend\_on/no\_return](/recipes/engine_tests/depend_on/no_return.py)

[DEPS](/recipes/engine_tests/depend_on/no_return.py#8): [properties](#recipe_modules-properties), [step](#recipe_modules-step)

&mdash; **def [RunSteps](/recipes/engine_tests/depend_on/no_return.py#18)(api):**
### *recipes* / [engine\_tests/depend\_on/top](/recipes/engine_tests/depend_on/top.py)

[DEPS](/recipes/engine_tests/depend_on/top.py#8): [properties](#recipe_modules-properties)

&mdash; **def [RunSteps](/recipes/engine_tests/depend_on/top.py#22)(api, to_pass):**
### *recipes* / [engine\_tests/expect\_exception](/recipes/engine_tests/expect_exception.py)

[DEPS](/recipes/engine_tests/expect_exception.py#7): [step](#recipe_modules-step)

Tests that step_data can accept multiple specs at once.

&mdash; **def [RunSteps](/recipes/engine_tests/expect_exception.py#11)(api):**
### *recipes* / [engine\_tests/functools\_partial](/recipes/engine_tests/functools_partial.py)

[DEPS](/recipes/engine_tests/functools_partial.py#12): [step](#recipe_modules-step)

Engine shouldn't explode when step_test_data gets functools.partial.

This is a regression test for a bug caused by this revision:
http://src.chromium.org/viewvc/chrome?revision=298072&view=revision

When this recipe is run (by run_test.py), the _print_step code is exercised.

&mdash; **def [RunSteps](/recipes/engine_tests/functools_partial.py#14)(api):**
### *recipes* / [engine\_tests/missing\_start\_dir](/recipes/engine_tests/missing_start_dir.py)

[DEPS](/recipes/engine_tests/missing_start_dir.py#7): [path](#recipe_modules-path), [step](#recipe_modules-step)

Tests that deleting the current working directory doesn't immediately fail.

&mdash; **def [RunSteps](/recipes/engine_tests/missing_start_dir.py#13)(api):**
### *recipes* / [engine\_tests/module\_injection\_site](/recipes/engine_tests/module_injection_site.py)

[DEPS](/recipes/engine_tests/module_injection_site.py#13): [path](#recipe_modules-path), [step](#recipe_modules-step)

This test serves to demonstrate that the ModuleInjectionSite object on
recipe modules (i.e. the `.m`) also contains a reference to the module which
owns it.

This was implemented to aid in refactoring some recipes (crbug.com/782142).

&mdash; **def [RunSteps](/recipes/engine_tests/module_injection_site.py#18)(api):**
### *recipes* / [engine\_tests/multi\_test\_data](/recipes/engine_tests/multi_test_data.py)

[DEPS](/recipes/engine_tests/multi_test_data.py#7): [raw\_io](#recipe_modules-raw_io), [step](#recipe_modules-step)

Tests that step_data can accept multiple specs at once.

&mdash; **def [RunSteps](/recipes/engine_tests/multi_test_data.py#12)(api):**
### *recipes* / [engine\_tests/nonexistent\_command](/recipes/engine_tests/nonexistent_command.py)

[DEPS](/recipes/engine_tests/nonexistent_command.py#1): [step](#recipe_modules-step)

&mdash; **def [RunSteps](/recipes/engine_tests/nonexistent_command.py#3)(api):**
### *recipes* / [engine\_tests/recipe\_paths](/recipes/engine_tests/recipe_paths.py)

[DEPS](/recipes/engine_tests/recipe_paths.py#7): [path](#recipe_modules-path), [python](#recipe_modules-python), [step](#recipe_modules-step)

Tests that recipes have access to names, resources and their package.

&mdash; **def [RunSteps](/recipes/engine_tests/recipe_paths.py#13)(api):**
### *recipes* / [engine\_tests/sort\_properties](/recipes/engine_tests/sort_properties.py)

[DEPS](/recipes/engine_tests/sort_properties.py#7): [step](#recipe_modules-step)

Tests that step presentation properties can be ordered.

&mdash; **def [RunSteps](/recipes/engine_tests/sort_properties.py#11)(api):**
### *recipes* / [engine\_tests/step\_stack\_exhaustion](/recipes/engine_tests/step_stack_exhaustion.py)

[DEPS](/recipes/engine_tests/step_stack_exhaustion.py#10): [step](#recipe_modules-step)

Tests that placeholders can't wreck the world by exhausting the step stack.

&mdash; **def [RunSteps](/recipes/engine_tests/step_stack_exhaustion.py#19)(api):**
### *recipes* / [engine\_tests/undeclared\_method](/recipes/engine_tests/undeclared_method.py)

[DEPS](/recipes/engine_tests/undeclared_method.py#7): [properties](#recipe_modules-properties), [python](#recipe_modules-python), [step](#recipe_modules-step)

&mdash; **def [RunSteps](/recipes/engine_tests/undeclared_method.py#19)(api, from_recipe, attribute, module):**
### *recipes* / [engine\_tests/unicode](/recipes/engine_tests/unicode.py)

[DEPS](/recipes/engine_tests/unicode.py#6): [properties](#recipe_modules-properties), [step](#recipe_modules-step)

&mdash; **def [RunSteps](/recipes/engine_tests/unicode.py#11)(api):**
### *recipes* / [engine\_tests/whitelist\_steps](/recipes/engine_tests/whitelist_steps.py)

[DEPS](/recipes/engine_tests/whitelist_steps.py#10): [context](#recipe_modules-context), [properties](#recipe_modules-properties), [step](#recipe_modules-step)

Tests that step_data can accept multiple specs at once.

&mdash; **def [RunSteps](/recipes/engine_tests/whitelist_steps.py#20)(api, fakeit):**
### *recipes* / [file:examples/copy](/recipe_modules/file/examples/copy.py)

[DEPS](/recipe_modules/file/examples/copy.py#5): [file](#recipe_modules-file), [json](#recipe_modules-json), [path](#recipe_modules-path)

&mdash; **def [RunSteps](/recipe_modules/file/examples/copy.py#12)(api):**
### *recipes* / [file:examples/copytree](/recipe_modules/file/examples/copytree.py)

[DEPS](/recipe_modules/file/examples/copytree.py#5): [file](#recipe_modules-file), [path](#recipe_modules-path)

&mdash; **def [RunSteps](/recipe_modules/file/examples/copytree.py#11)(api):**
### *recipes* / [file:examples/error](/recipe_modules/file/examples/error.py)

[DEPS](/recipe_modules/file/examples/error.py#5): [file](#recipe_modules-file), [path](#recipe_modules-path)

&mdash; **def [RunSteps](/recipe_modules/file/examples/error.py#11)(api):**
### *recipes* / [file:examples/glob](/recipe_modules/file/examples/glob.py)

[DEPS](/recipe_modules/file/examples/glob.py#5): [file](#recipe_modules-file), [json](#recipe_modules-json), [path](#recipe_modules-path)

&mdash; **def [RunSteps](/recipe_modules/file/examples/glob.py#11)(api):**
### *recipes* / [file:examples/listdir](/recipe_modules/file/examples/listdir.py)

[DEPS](/recipe_modules/file/examples/listdir.py#5): [file](#recipe_modules-file), [path](#recipe_modules-path)

&mdash; **def [RunSteps](/recipe_modules/file/examples/listdir.py#11)(api):**
### *recipes* / [file:examples/raw\_copy](/recipe_modules/file/examples/raw_copy.py)

[DEPS](/recipe_modules/file/examples/raw_copy.py#5): [file](#recipe_modules-file), [json](#recipe_modules-json), [path](#recipe_modules-path)

&mdash; **def [RunSteps](/recipe_modules/file/examples/raw_copy.py#12)(api):**
### *recipes* / [file:examples/symlink](/recipe_modules/file/examples/symlink.py)

[DEPS](/recipe_modules/file/examples/symlink.py#5): [file](#recipe_modules-file), [json](#recipe_modules-json), [path](#recipe_modules-path)

&mdash; **def [RunSteps](/recipe_modules/file/examples/symlink.py#12)(api):**
### *recipes* / [file:examples/truncate](/recipe_modules/file/examples/truncate.py)

[DEPS](/recipe_modules/file/examples/truncate.py#5): [file](#recipe_modules-file), [path](#recipe_modules-path)

&mdash; **def [RunSteps](/recipe_modules/file/examples/truncate.py#11)(api):**
### *recipes* / [generator\_script:examples/full](/recipe_modules/generator_script/examples/full.py)

[DEPS](/recipe_modules/generator_script/examples/full.py#7): [generator\_script](#recipe_modules-generator_script), [json](#recipe_modules-json), [path](#recipe_modules-path), [properties](#recipe_modules-properties), [step](#recipe_modules-step)

&mdash; **def [RunSteps](/recipe_modules/generator_script/examples/full.py#19)(api, script_name):**
### *recipes* / [json:examples/full](/recipe_modules/json/examples/full.py)

[DEPS](/recipe_modules/json/examples/full.py#5): [json](#recipe_modules-json), [path](#recipe_modules-path), [properties](#recipe_modules-properties), [python](#recipe_modules-python), [raw\_io](#recipe_modules-raw_io), [step](#recipe_modules-step)

&mdash; **def [RunSteps](/recipe_modules/json/examples/full.py#16)(api):**
### *recipes* / [json:tests/add\_json\_log](/recipe_modules/json/tests/add_json_log.py)

[DEPS](/recipe_modules/json/tests/add_json_log.py#5): [json](#recipe_modules-json), [step](#recipe_modules-step)

&mdash; **def [RunSteps](/recipe_modules/json/tests/add_json_log.py#10)(api):**
### *recipes* / [path:examples/full](/recipe_modules/path/examples/full.py)

[DEPS](/recipe_modules/path/examples/full.py#5): [path](#recipe_modules-path), [platform](#recipe_modules-platform), [properties](#recipe_modules-properties), [step](#recipe_modules-step)

&mdash; **def [RunSteps](/recipe_modules/path/examples/full.py#14)(api):**
### *recipes* / [platform:examples/full](/recipe_modules/platform/examples/full.py)

[DEPS](/recipe_modules/platform/examples/full.py#5): [platform](#recipe_modules-platform), [step](#recipe_modules-step)

&mdash; **def [RunSteps](/recipe_modules/platform/examples/full.py#10)(api):**
### *recipes* / [properties:examples/full](/recipe_modules/properties/examples/full.py)

[DEPS](/recipe_modules/properties/examples/full.py#7): [properties](#recipe_modules-properties), [step](#recipe_modules-step)

&mdash; **def [RunSteps](/recipe_modules/properties/examples/full.py#18)(api, test_prop, param_name_test, from_env):**
### *recipes* / [python:examples/full](/recipe_modules/python/examples/full.py)

[DEPS](/recipe_modules/python/examples/full.py#7): [path](#recipe_modules-path), [python](#recipe_modules-python), [raw\_io](#recipe_modules-raw_io), [step](#recipe_modules-step)

Launches the repo bundler.

&mdash; **def [RunSteps](/recipe_modules/python/examples/full.py#15)(api):**
### *recipes* / [raw\_io:examples/full](/recipe_modules/raw_io/examples/full.py)

[DEPS](/recipe_modules/raw_io/examples/full.py#5): [path](#recipe_modules-path), [properties](#recipe_modules-properties), [python](#recipe_modules-python), [raw\_io](#recipe_modules-raw_io), [step](#recipe_modules-step)

&mdash; **def [RunSteps](/recipe_modules/raw_io/examples/full.py#14)(api):**
### *recipes* / [runtime:tests/full](/recipe_modules/runtime/tests/full.py)

[DEPS](/recipe_modules/runtime/tests/full.py#7): [runtime](#recipe_modules-runtime), [step](#recipe_modules-step)

&mdash; **def [RunSteps](/recipe_modules/runtime/tests/full.py#13)(api):**
### *recipes* / [service\_account:examples/full](/recipe_modules/service_account/examples/full.py)

[DEPS](/recipe_modules/service_account/examples/full.py#7): [path](#recipe_modules-path), [platform](#recipe_modules-platform), [properties](#recipe_modules-properties), [raw\_io](#recipe_modules-raw_io), [service\_account](#recipe_modules-service_account)

&mdash; **def [RunSteps](/recipe_modules/service_account/examples/full.py#22)(api, key_path, scopes, lifetime_sec):**
### *recipes* / [source\_manifest:examples/simple](/recipe_modules/source_manifest/examples/simple.py)

[DEPS](/recipe_modules/source_manifest/examples/simple.py#6): [python](#recipe_modules-python), [source\_manifest](#recipe_modules-source_manifest)

&mdash; **def [RunSteps](/recipe_modules/source_manifest/examples/simple.py#12)(api):**
### *recipes* / [step:examples/full](/recipe_modules/step/examples/full.py)

[DEPS](/recipe_modules/step/examples/full.py#7): [context](#recipe_modules-context), [path](#recipe_modules-path), [properties](#recipe_modules-properties), [step](#recipe_modules-step)

&mdash; **def [RunSteps](/recipe_modules/step/examples/full.py#27)(api, bad_return, access_invalid_data, timeout):**
### *recipes* / [step:tests/active\_result](/recipe_modules/step/tests/active_result.py)

[DEPS](/recipe_modules/step/tests/active_result.py#5): [step](#recipe_modules-step)

&mdash; **def [RunSteps](/recipe_modules/step/tests/active_result.py#10)(api):**
### *recipes* / [step:tests/defer](/recipe_modules/step/tests/defer.py)

[DEPS](/recipe_modules/step/tests/defer.py#5): [step](#recipe_modules-step)

&mdash; **def [RunSteps](/recipe_modules/step/tests/defer.py#9)(api):**
### *recipes* / [step:tests/inject\_paths](/recipe_modules/step/tests/inject_paths.py)

[DEPS](/recipe_modules/step/tests/inject_paths.py#5): [context](#recipe_modules-context), [path](#recipe_modules-path), [properties](#recipe_modules-properties), [step](#recipe_modules-step)

&mdash; **def [RunSteps](/recipe_modules/step/tests/inject_paths.py#13)(api):**
### *recipes* / [step:tests/nested](/recipe_modules/step/tests/nested.py)

[DEPS](/recipe_modules/step/tests/nested.py#6): [context](#recipe_modules-context), [step](#recipe_modules-step)

&mdash; **def [RunSteps](/recipe_modules/step/tests/nested.py#12)(api):**
### *recipes* / [step:tests/stdio](/recipe_modules/step/tests/stdio.py)

[DEPS](/recipe_modules/step/tests/stdio.py#5): [raw\_io](#recipe_modules-raw_io), [step](#recipe_modules-step)

&mdash; **def [RunSteps](/recipe_modules/step/tests/stdio.py#11)(api):**
### *recipes* / [step:tests/subannotations](/recipe_modules/step/tests/subannotations.py)

[DEPS](/recipe_modules/step/tests/subannotations.py#5): [step](#recipe_modules-step)

&mdash; **def [RunSteps](/recipe_modules/step/tests/subannotations.py#7)(api):**
### *recipes* / [step:tests/timeout](/recipe_modules/step/tests/timeout.py)

[DEPS](/recipe_modules/step/tests/timeout.py#8): [properties](#recipe_modules-properties), [step](#recipe_modules-step)

&mdash; **def [RunSteps](/recipe_modules/step/tests/timeout.py#19)(api, timeout):**
### *recipes* / [step:tests/trigger](/recipe_modules/step/tests/trigger.py)

[DEPS](/recipe_modules/step/tests/trigger.py#7): [properties](#recipe_modules-properties), [step](#recipe_modules-step)

&mdash; **def [RunSteps](/recipe_modules/step/tests/trigger.py#16)(api, command):**
### *recipes* / [tempfile:examples/full](/recipe_modules/tempfile/examples/full.py)

[DEPS](/recipe_modules/tempfile/examples/full.py#5): [tempfile](#recipe_modules-tempfile)

&mdash; **def [RunSteps](/recipe_modules/tempfile/examples/full.py#9)(api):**
### *recipes* / [time:examples/full](/recipe_modules/time/examples/full.py)

[DEPS](/recipe_modules/time/examples/full.py#7): [step](#recipe_modules-step), [time](#recipe_modules-time)

&mdash; **def [RunSteps](/recipe_modules/time/examples/full.py#13)(api):**
### *recipes* / [url:examples/full](/recipe_modules/url/examples/full.py)

[DEPS](/recipe_modules/url/examples/full.py#5): [context](#recipe_modules-context), [path](#recipe_modules-path), [step](#recipe_modules-step), [url](#recipe_modules-url)

&mdash; **def [RunSteps](/recipe_modules/url/examples/full.py#27)(api):**
### *recipes* / [url:tests/join](/recipe_modules/url/tests/join.py)

[DEPS](/recipe_modules/url/tests/join.py#5): [step](#recipe_modules-step), [url](#recipe_modules-url)

&mdash; **def [RunSteps](/recipe_modules/url/tests/join.py#11)(api):**
### *recipes* / [url:tests/validate\_url](/recipe_modules/url/tests/validate_url.py)

[DEPS](/recipe_modules/url/tests/validate_url.py#5): [properties](#recipe_modules-properties), [step](#recipe_modules-step), [url](#recipe_modules-url)

&mdash; **def [RunSteps](/recipe_modules/url/tests/validate_url.py#12)(api):**

